#!/usr/bin/perl

use strict; 
use File::stat;
use List::Util qw(first);
use User::pwent;


my $dir = '/etc/domains';

open (D, "find $dir -name www |") or die $!;

while (<D>) {

  chomp;
  my $st = stat($_);

  my @path = split '/';
  @path = @path[3..$#path-1];

  @path = reverse @path;
  my $domain = join '.', @path;

  #  warn "$_ -> $domain";
  my $pwent = getpwuid($st->uid);
  #  warn $pwent->name;

  printf "%s\t%s\n", $pwent->name, $domain;

}
